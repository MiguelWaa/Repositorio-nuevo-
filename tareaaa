-- Crear base de datos
CREATE DATABASE EscuelaDB;
GO

-- Usar la base de datos
USE EscuelaDB;
GO

-- Crear tabla de alumnos
CREATE TABLE Alumnos (
    ID_Alumno INT PRIMARY KEY IDENTITY(1,1),
    Nombre VARCHAR(50),
    Apellido VARCHAR(50),
    Edad INT,
    Grado VARCHAR(10)
);

-- Crear tabla de cursos
CREATE TABLE Cursos (
    ID_Curso INT PRIMARY KEY IDENTITY(1,1),
    NombreCurso VARCHAR(50),
    Profesor VARCHAR(50)
);

-- Crear tabla de matrículas (relación muchos a muchos)
CREATE TABLE Matriculas (
    ID_Matricula INT PRIMARY KEY IDENTITY(1,1),
    ID_Alumno INT,
    ID_Curso INT,
    FechaMatricula DATE,
    FOREIGN KEY (ID_Alumno) REFERENCES Alumnos(ID_Alumno),
    FOREIGN KEY (ID_Curso) REFERENCES Cursos(ID_Curso)
);

-- Insertar datos en Alumnos
INSERT INTO Alumnos (Nombre, Apellido, Edad, Grado) VALUES
('Luis', 'Ramírez', 15, '3A'),
('Ana', 'Pérez', 16, '4B'),
('Carlos', 'Gómez', 14, '2A');

-- Insertar datos en Cursos
INSERT INTO Cursos (NombreCurso, Profesor) VALUES
('Matemáticas', 'Prof. Torres'),
('Historia', 'Prof. Díaz'),
('Ciencias', 'Prof. Morales');

-- Insertar datos en Matriculas
INSERT INTO Matriculas (ID_Alumno, ID_Curso, FechaMatricula) VALUES
(1, 1, '2025-03-01'),
(1, 3, '2025-03-01'),
(2, 2, '2025-03-02'),
(3, 1, '2025-03-03');

-- Consultar datos combinando tablas
SELECT 
    A.Nombre + ' ' + A.Apellido AS Alumno,
    C.NombreCurso AS Curso,
    C.Profesor,
    M.FechaMatricula
FROM Matriculas M
INNER JOIN Alumnos A ON M.ID_Alumno = A.ID_Alumno
INNER JOIN Cursos C ON M.ID_Curso = C.ID_Curso
ORDER BY A.Nombre;